<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Lista de Louvores</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      padding: 20px;
    }
  </style>
</head>
<body>

  <div class="container">

    <!-- Campo de busca -->
    <div class="d-flex mb-3 gap-2">
      <input type="text" id="meuInput" class="form-control" placeholder="Buscar louvor...">
    </div>

    <!-- Tabela principal -->
    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>Número</th>
          <th>Nome do Louvor</th>
          <th>Adicionar</th>
        </tr>
      </thead>
      <tbody id="tabelaPrincipal">
        <tr>
          <td>1</td>
          <td>Louvor Exemplo 1</td>
          <td><button class="btn btn-success btn-sm btn-adicionar">+</button></td>
        </tr>
        <tr>
          <td>2</td>
          <td>Louvor Exemplo 2</td>
          <td><button class="btn btn-success btn-sm btn-adicionar">+</button></td>
        </tr>
        <tr>
          <td>3</td>
          <td>Louvor da Vitória</td>
          <td><button class="btn btn-success btn-sm btn-adicionar">+</button></td>
        </tr>
        <tr>
          <td>4</td>
          <td>Gratidão Eterna</td>
          <td><button class="btn btn-success btn-sm btn-adicionar">+</button></td>
        </tr>
      </tbody>
    </table>

    <!-- Botão para abrir modal -->
    <button class="btn btn-info mb-3" data-bs-toggle="modal" data-bs-target="#modalLista" id="btnVerLista">
      Ver Lista Gerada
    </button>

    <!-- Tabela de louvores adicionados -->
    <h5>Louvores Adicionados</h5>
    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>Número</th>
          <th>Nome do Louvor</th>
          <th>Remover</th>
        </tr>
      </thead>
      <tbody id="tabelaAdicionados">
        <!-- Itens adicionados vão aparecer aqui -->
      </tbody>
    </table>
  </div>

  <!-- Modal Bootstrap -->
  <div class="modal fade" id="modalLista" tabindex="-1" aria-labelledby="modalListaLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalListaLabel">Lista de Louvores</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <ul id="listaLouvores" class="list-group">
            <!-- Conteúdo gerado dinamicamente -->
          </ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const tabelaPrincipal = document.getElementById('tabelaPrincipal');
    const tabelaAdicionados = document.getElementById('tabelaAdicionados');
    const campoBusca = document.getElementById('meuInput');

    const adicionados = new Set();

    // Adicionar louvor
    tabelaPrincipal.addEventListener('click', function (e) {
      if (e.target.classList.contains('btn-adicionar')) {
        const linha = e.target.closest('tr');
        const numero = linha.children[0].textContent.trim();
        const nome = linha.children[1].textContent.trim();
        const idLouvor = numero + nome;

        if (adicionados.has(idLouvor)) {
          alert('Esse louvor já foi adicionado!');
          return;
        }

        const novaLinha = document.createElement('tr');
        novaLinha.innerHTML = `
          <td>${numero}</td>
          <td>${nome}</td>
          <td><button class="btn btn-danger btn-sm btn-remover">Remover</button></td>
        `;
        tabelaAdicionados.appendChild(novaLinha);
        adicionados.add(idLouvor);
      }
    });

    // Remover louvor
    tabelaAdicionados.addEventListener('click', function (e) {
      if (e.target.classList.contains('btn-remover')) {
        const linha = e.target.closest('tr');
        const numero = linha.children[0].textContent.trim();
        const nome = linha.children[1].textContent.trim();
        const idLouvor = numero + nome;

        adicionados.delete(idLouvor);
        linha.remove();
      }
    });

    // Filtrar tabela principal
    campoBusca.addEventListener('input', function () {
      const filtro = this.value.toLowerCase();

      Array.from(tabelaPrincipal.rows).forEach((linha, index) => {
        if (index === 0) return; // cabeçalho
        const texto = linha.children[1].textContent.toLowerCase();
        linha.style.display = texto.includes(filtro) ? '' : 'none';
      });
    });

    // Gerar conteúdo da modal
    document.getElementById('btnVerLista').addEventListener('click', function () {
      const lista = document.getElementById('listaLouvores');
      lista.innerHTML = '';

      const linhas = tabelaAdicionados.querySelectorAll('tr');

      if (linhas.length === 0) {
        const item = document.createElement('li');
        item.className = 'list-group-item';
        item.textContent = 'Nenhum louvor adicionado.';
        lista.appendChild(item);
        return;
      }

      linhas.forEach(linha => {
        const numero = linha.children[0].textContent.trim();
        const nome = linha.children[1].textContent.trim();

        const item = document.createElement('li');
        item.className = 'list-group-item';

        const link = document.createElement('a');
        link.href = `${numero}.html`;
        link.textContent = `${numero} - ${nome}`;
        link.target = '_blank';

        item.appendChild(link);
        lista.appendChild(item);
      });
    });
  </script>

</body>
</html>
